#include <stdlib.h>
#include <stdio.h>
#include <math.h>
#include <err.h>
#include "decode.h"

int main(void)
{
    char **qrcode = (char **)malloc(21 * sizeof(char*));
    for(int i = 0; i < 21; i++) qrcode[i] = (char *)malloc(21 * sizeof(char));
    qrcode[0] = "111111100011101111111";
    qrcode[1] = "100000101110101000001";
    qrcode[2] = "101110100011101011101";
    qrcode[3] = "101110101100101011101";
    qrcode[4] = "101110100100101011101";
    qrcode[5] = "100000101001001000001";
    qrcode[6] = "111111101010101111111";
    qrcode[7] = "000000000100000000000";
    qrcode[8] = "111110111001010101010";
    qrcode[9] = "010010001001111010110";
    qrcode[10] = "011110110000110001001";
    qrcode[11] = "010001011111111001000";
    qrcode[12] = "000001100100100000100";
    qrcode[13] = "000000001100100000010";
    qrcode[14] = "111111101011000101110";
    qrcode[15] = "100000100100000010001";
    qrcode[16] = "101110101111000111110";
    qrcode[17] = "101110101001111111100";
    qrcode[18] = "101110101110101011000";
    qrcode[19] = "100000101011111000001";
    qrcode[20] = "111111100010100110000";

    /*int **qr;
    qr = qrcode;
*/
    // 'total' will be ? = 21 * 21
   int total = sizeof(qrcode);

   // 'column' will be 21 = size of first row
   int column = sizeof(qrcode[0])/sizeof(char);

   // 'row' will be 21 = ? / 21
   int row = total / column;

   printf("Total fields: %d\n", total);
   printf("Number of rows: %d\n", row);
   printf("Number of columns: %d\n", column);
   //qrcode[0][0] += 2;
   printf("TEST: %c\n", qrcode[0][0]);

    //int p = len_mat(qrcode);
   //printf("Len FUNCTION: %d\n", p);

    char* str = Decode_QR(qrcode, 21);
    printf("QRCode output: %s\n", str);

    return 0;
}
/*
{
        {'1','1','1','1','1','1','1','0','0','0','1','1','1','0','1','1','1','1','1','1','1'}
        {'1','0','0','0','0','0','1','0','1','1','1','0','1','0','1','0','0','0','0','0','1'},
        {'1','0','1','1','1','0','1','0','0','0','1','1','1','0','1','0','1','1','1','0','1'},
        {'1','0','1','1','1','0','1','0','1','1','0','0','1','0','1','0','1','1','1','0','1'},
        {'1','0','1','1','1','0','1','0','0','1','0','0','1','0','1','0','1','1','1','0','1'},
        {'1','0','0','0','0','0','1','0','1','0','0','1','0','0','1','0','0','0','0','0','1'},
        {'1','1','1','1','1','1','1','0','1','0','1','0','1','0','1','1','1','1','1','1','1'},
        {'0','0','0','0','0','0','0','0','0','1','0','0','0','0','0','0','0','0','0','0','0'},
        {'1','1','1','1','1','0','1','1','1','0','0','1','0','1','0','1','0','1','0','1','0'},
        {'0','1','0','0','1','0','0','0','1','0','0','1','1','1','1','0','1','0','1','1','0'},
        {'0','1','1','1','1','0','1','1','0','0','0','0','1','1','0','0','0','1','0','0','1'},
        {'0','1','0','0','0','1','0','1','1','1','1','1','1','1','1','0','0','1','0','0','0'},
        {'0','0','0','0','0','1','1','0','0','1','0','0','1','0','0','0','0','0','1','0','0'},
        {'0','0','0','0','0','0','0','0','1','1','0','0','1','0','0','0','0','0','0','1','0'},
        {'1','1','1','1','1','1','1','0','1','0','1','1','0','0','0','1','0','1','1','1','0'},
        {'1','0','0','0','0','0','1','0','0','1','0','0','0','0','0','0','1','0','0','0','1'},
        {'1','0','1','1','1','0','1','0','1','1','1','1','0','0','0','1','1','1','1','1','0'},
        {'1','0','1','1','1','0','1','0','1','0','0','1','1','1','1','1','1','1','1','0','0'},
        {'1','0','1','1','1','0','1','0','1','1','1','0','1','0','1','0','1','1','0','0','0'},
        {'1','0','0','0','0','0','1','0','1','0','1','1','1','1','1','0','0','0','0','0','1'},
        {'1','1','1','1','1','1','1','0','0','0','1','0','1','0','0','1','1','0','0','0','0'},
    };*/